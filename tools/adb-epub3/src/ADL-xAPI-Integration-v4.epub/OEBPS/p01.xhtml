<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en">
<head>
	<meta charset="UTF-8"/>
	<title>Page 01</title>
	<link href="css/style.css" type="text/css" rel="stylesheet"/>
    <!-- Include the xapiwrapper.js and dependent scripts -->
    <script src="js/h5utils.js"></script>
    <script src="js/config.js"></script>
    <script src="js/base64.js"></script>
    <script src="js/verbs.js"></script>
    <script src="js/xapiwrapper.js"></script>
</head>
<body>
    <div class="p01 left">
        <section class="license">
            <p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
            <p>By no means is this an exhaustive example, and I take no responsibility for any problems that arise from this work, but I'm happy that it validates and works in Readium as is, and serves as a practical guide, example and demonstration of the technology.</p>
            <p>Based on <a href="http://jasonhibbs.co.uk/2012/blank-book/">Blank Book</a> by <a href="http://jasonhibbs.co.uk" title="Jason Hibbs' Homepage" rel="Creator">Jason Hibbs</a>. This book integrates <a href="https://github.com/adlnet/xAPIWrapper">xapiwrapper.js</a> to show examples of communication to a Learning Record Store, such as the <a href="https://lrs.adlnet.gov/xAPI/">ADL LRS</a>.</p>
            <p>A session based hash has been appended to an email address for the actor statements to show data persistence across multiple xhtml files using HTML5 local storage.</p>
        </section>
    </div>
    <script>
    // Update the config to use the credentials of your LRS 
    ADL.XAPIWrapper.changeConfig(Config);
    var email = getStorage('session');
    //alert(email);

    // Build Statement
    var stmt = { 
        "actor": { "mbox": "mailto:" + email },
        "verb": ADL.verbs.experienced,
        "object": {
            "id": "http://ebooks.adlnet.gov/xapi-integration/page-1/experienced",
            "definition": {
                "name": { "en-US": "Page 1" }
            }
        }
    };
    // Send Statement
    ADL.XAPIWrapper.sendStatement(stmt, function(resp, obj) {
        // Callback action
        //alert(obj.id);
    });
    </script>
</body>
</html>
